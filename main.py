from bot_sender.Telegram_send import send_telegram_message
from news_fetcher.nplus1_parser import fetch_news_selenium
from news_filter.filter_news_n import filter_news

if __name__ == "__main__":
    all_news = fetch_news_selenium()
    print(f"Всего найдено: {len(all_news)}")

    positive_keywords = positive_keywords = [
        "открытие",
        "достижение",
        "успех",
        "победа",
        "новинка",
        "обнаружили",
        "исследование",
        "учёные выяснили",
        "полезно",
        "совет",
        "как улучшить",
        "как стать",
        "улучшить",
        "продуктивность",
        "мотивация",
        "вдохновение",
        "невероятный",
        "удивительный",
        "факт",
        "интересно",
        "необычное",
        "лайфхак",
        "технология",
        "будущее",
        "прорыв",
        "рост",
        "развитие",
        "спокойствие",
        "радость",
        "улыбка",
        "добро",
        "позитив",
        "щедрость",
        "история успеха",
        "милое",
        "котик",
        "пёсик",
        "животные",
        "помощь",
        "волонтёр",
        "дети помогли",
        "чудо",
        "спасли",
        "счастье",
        "отдых",
        "гармония",
        "здоровье",
        "психология",
        "благополучие",
        "саморазвитие",
        "навык",
        "простое решение",
        "удалось",
        "нашли способ",
        "инновация",
        "новый подход",
        "улучшения",
        "экологично",
        "эко",
        "умное",
        "автоматизация",
        "простой способ",
        "оптимизация",
        "успешный",
        "перемены к лучшему",
        "решение найдено",
        "положительное",
        "неожиданно приятно",
        "праздник",
        "юбилей",
        "рекорд",
        "хобби",
        "творчество",
        "вдохновляющая история",
        "самое лучшее",
        "рекомендации",
        "на заметку",
        "тёплая история",
        "любовь",
        "доброта",
    ]
    negative_keywords = [
        "убийство",
        "смерть",
        "погиб",
        "погибли",
        "умер",
        "умерла",
        "погибла",
        "авария",
        "катастрофа",
        "трагедия",
        "взрыв",
        "взорвался",
        "застрелил",
        "нападение",
        "изнасилование",
        "жестокость",
        "насилие",
        "жертва",
        "криминал",
        "расследование",
        "арест",
        "суд",
        "штраф",
        "приговор",
        "тюрьма",
        "полиция",
        "ограбление",
        "драка",
        "конфликт",
        "скандал",
        "сенсация",
        "обман",
        "мошенник",
        "кража",
        "вор",
        "похищение",
        "терроризм",
        "теракт",
        "угроза",
        "паника",
        "кризис",
        "рецессия",
        "инфляция",
        "банкротство",
        "война",
        "вторжение",
        "бомбардировка",
        "фронт",
        "армия",
        "военные",
        "вооружённый",
        "политика",
        "политик",
        "правительство",
        "президент",
        "депутат",
        "выборы",
        "партия",
        "санкции",
        "коррупция",
        "оппозиция",
        "митинг",
        "протест",
        "цензура",
        "репрессии",
        "болезнь",
        "вирус",
        "пандемия",
        "ковид",
        "грипп",
        "заражение",
        "эпидемия",
        "рак",
        "инфекция",
        "диагноз",
        "больница",
        "реанимация",
        "страдание",
        "инвалидность",
        "депрессия",
        "паническая атака",
        "стресс",
        "боль",
        "слёзы",
        "развод",
        "измена",
        "разрыв",
        "самоубийство",
        "звезда",
        "селебрити",
        "шоу-бизнес",
        "гламур",
        "интрига",
        "сплетни",
        "оскар",
        "разоблачение",
        "шок",
        "ужас",
        "страшно",
        "отвратительно",
        "невыносимо",
        "грязь",
        "виновен",
        "обвинили",
        "стыд",
        "ненависть",
    ]

    filtered = filter_news(all_news, positive_keywords, negative_keywords)

    print(f"Подходящие новости: {len(filtered)}\n")
    for news in filtered:
        message = f"<b>{news['title']}</b>\n{news['link']}"
        send_telegram_message(message)
        print(f"{news['title']}\n{news['link']}\n")
